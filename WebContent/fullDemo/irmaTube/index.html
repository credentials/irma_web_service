<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <meta name="keywords" content="IRMA, IRMATube, film, privacy, security">
 <meta name="description" content="Experimental IRMATube video streaming service">

 <title>IRMATube - Watch movies without others noticing it!</title>

 <link href="../../css/irma.css" rel="stylesheet" type="text/css" />
 <link href="../../css/mosaic.css" rel="stylesheet" type="text/css" />
 <link href="../../css/bootstrap.css" rel="stylesheet" type="text/css" />
 <style type="text/css">
  #movies {
  	width: 100%;
  	padding: 10px;
  }
  #arrow {
  	margin-left: 75px;
  	width: 50px;
  	height: 50px;
  }
  .video-overlay {
    position: absolute; left: 20%; top: 20%; display: block;
    border: 0px; width: 700px; height: 450px;
    text-align: center; vertical-align: middle;
    background: lightgray; z-index: 10;
    display: none;
  }
 </style>
 

 <script src="../../js/jquery-1.8.1.min.js" type="text/javascript"></script>
 <script src="../../js/mosaic.1.0.1.min.js" type="text/javascript"></script>
<!--
 <script src="../../js/smartcardjs.js" type="text/javascript"></script>
 <script src="../../js/channel.js" type="text/javascript"></script>
 <script src="../../js/ProxyReader.js" type="text/javascript"></script>
 <script src="../../js/bootstrap.min.js" type="text/javascript"></script>
 <script src="../../js/irma.js" type="text/javascript"></script>
 -->

 <script src="../../js/mustache.js" type="text/javascript"></script>

 <script id="movieTpl" type="text/template">
   <div id="movie_{{number}}_wrapper">
     <div class="video-overlay" id="video_div_{{number}}">
       <video controls="controls" preload="true" id="video_{{number}}" height="400" width="700">
	     <source src="content/movie_{{number}}.mp4" type="video/{{format}}">
	     Your browser does not support the video tag.
       </video>
       <button onclick="closeWindow({{number}})">Close</button>
     </div>

     <div class="mosaic-block bar" id="movie_{{number}}">
	   <span href="#" onclick="openWindow({{number}});" class="mosaic-overlay">
        <h4>{{title}}
        {{#ageLimit}}
        <a target='_blank' href='IRMA-age-reference.html'>
         <img src='img/movieage-{{ageLimit}}.png' />
        </a>
        {{/ageLimit}}
        </h4>
       </span>

       <div class="mosaic-backdrop">
        <img alt="{{title}}" src="content/{{number}}-{{titleCode}}.jpg">
       </div>
     </div>
   </div>
 </script>
	
 <script type="text/javascript">
  function openWindow(videoNumber) {
   video_div = "video_div_" + videoNumber;
   video = "video_" + videoNumber;
   document.getElementById(video_div).style.display = 'block';
   document.getElementById(video).play();
  }

  function closeWindow(videoNumber) {
   video_div = "video_div_" + videoNumber;
   video = "video_" + videoNumber;
   document.getElementById(video_div).style.display = 'none';
   document.getElementById(video).pause();
  }
  
 $( function() {
    function addMovie(number, title, titleCode, ageLimit, format) {
      movie = {number: number, title: title, titleCode: titleCode, ageLimit: ageLimit, format: format};
      console.log(movie);
      
      var template = $("#movieTpl").html();
      console.log("Template", template);
      console.log(Mustache.to_html(template, movie));
      $("#movies").append(Mustache.to_html(template, movie));
      $("#movie_" + number).mosaic({animation: 'slide'});
    };
    
    addMovie(500, "Django", "django", 18, "mp4");
    addMovie(501, "Oblivion", "oblivion", 12, "mp4");
    addMovie(502, "Oz the Great and Powerful", "oz-the-great-and-powerful", 0, "mp4");
    addMovie(503, "Olympus Has Fallen", "olympus-has-fallen", 16, "mp4");
    addMovie(504, "Up", "up", 0, "mp4");
  });

 </script>
</head>

<body>
<br>

 <a href="http://www.irmacard.org/"><img src="img/IRMATube_logo.png" width="200" /></a>
 <div>
  <img src="img/arrows_blue_animated.gif" id="arrow"/>
  IRMATube is the privacy-friendly video-streaming service
 </div>

 <div id="movies">
 </div>
</body>
</html>
